<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.3. Quality of Service (QoS) Facilities &mdash; Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation" href="index.html" />
    <link rel="up" title="7. 7.0 Controlling Resource Access - Reservations, Partitions, and QoS Facilities" href="7.0controllingresourceaccess.html" />
    <link rel="next" title="8. Optimizing Scheduling Behavior - Backfill, Node Sets, and Preemption" href="8.0optimizingschedulingbehavior.html" />
    <link rel="prev" title="7.2. Partitions" href="7.2partitions.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="8.0optimizingschedulingbehavior.html" title="8. Optimizing Scheduling Behavior - Backfill, Node Sets, and Preemption"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="7.2partitions.html" title="7.2. Partitions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="7.0controllingresourceaccess.html" accesskey="U">7. 7.0 Controlling Resource Access - Reservations, Partitions, and QoS Facilities</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quality-of-service-qos-facilities">
<h1>7.3. Quality of Service (QoS) Facilities<a class="headerlink" href="#quality-of-service-qos-facilities" title="Permalink to this headline">¶</a></h1>
<div class="section" id="qos-overview">
<h2>7.3.1. QoS Overview<a class="headerlink" href="#qos-overview" title="Permalink to this headline">¶</a></h2>
<p>The QOS facility allows a site to give special treatment to various
classes of jobs, users, groups, etc. Each QOS object can be thought of
as a container of special privileges ranging from fairness policy
exemptions, to special job prioritization, to special functionality
access. Each QOS object also has an extensive access list of users,
groups, and accounts which can access these privileges.</p>
<p>Sites can configure various QOS&#8217;s each with its own set of priorities,
policy exemptions, and special resource access settings. They can then
configure user, group, account, and class access to these QOS&#8217;s. A given
job will have a default QOS and may have access to several additional
QOS&#8217;s. When the job is submitted, the submittor may request a specific
QOS (see the User&#8217;s Manual for information on specifying job QOS for the
resource manager of interest) or just allow the default QOS to be used.
Once a job is submitted, a user may adjust the QOS of his job&#8217;s at any
time using the &#8216;<a class="reference external" href="commands/setqos.html">setqos</a>&#8216; command. The
<strong>setqos</strong> command will only allow the user to modify the QOS of his
jobs and only change the QOS to a QOS that this user has access to. Maui
administrators may change the QOS of any job to any value.</p>
<p>Jobs are currently granted access to QOS privileges by configuring QDEF
(QOS Default) or QLIST (QOS Access List) settings in the fs.cfg file. A
job may access a particular QOS if that QOS is listed in the system
default configuration QDEF or QLIST, or if the QOS is specified in the
QDEF or QLIST of a user, group, account, or class associated with that
job.</p>
<div class="line-block">
<div class="line">The &#8216;<a class="reference external" href="commands/diagnoseqos.html">diagnose -Q</a>&#8216; command can be used
to obtain information about the current QOS configuration.</div>
</div>
<p><a href="#id1"><span class="problematic" id="id2">|image4|</span></a>With the <a class="reference external" href="../mcm/index.html">Moab Cluster
Manager</a><sup>TM</sup>, a QoS can be <a class="reference external" href="../mcm/qos.html">created,
modifed</a> and <a class="reference external" href="../mcm/reports.html">reports</a>
generated about through a graphical interface.</p>
</div>
<div class="section" id="qos-enabled-privileges">
<h2>7.3.2. QoS Enabled Privileges<a class="headerlink" href="#qos-enabled-privileges" title="Permalink to this headline">¶</a></h2>
<p>The privileges enabled via QoS settings may be broken into one of the
following categories</p>
<ul class="simple">
<li>Special Prioritization</li>
<li>Service Access and Constraints</li>
<li>Override Policies and Policy Exemptions</li>
</ul>
<p>All privileges are managed via the
<a class="reference external" href="a.fparameters.html#qoscfg">QOSCFG</a> parameter.</p>
<div class="section" id="special-prioritization">
<h3>7.3.2.1. Special Prioritization<a class="headerlink" href="#special-prioritization" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Attribute Name</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>FSTARGET</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>PRIORITY</td>
<td>Assign priority to all jobs requesting particular QoS</td>
</tr>
<tr class="row-even"><td>QTTARGET</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>QTWEIGHT</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>XFTARGET</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>XFWEIGHT</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="line-block">
<div class="line">&#8212;</div>
<div class="line"><code class="docutils literal"><span class="pre">QOSCFG[geo]</span> <span class="pre">PRIORITY=10000</span></code></div>
<div class="line">&#8212;</div>
</div>
</div>
<div class="section" id="service-access-and-constraints">
<h3>7.3.2.2. Service Access and Constraints<a class="headerlink" href="#service-access-and-constraints" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">service-access-and-constraints</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line">The QoS facility can ne used to enable special service and/or disable
default services. All services are enabled/disabled by setting the QoS
<strong>QFLAGS</strong> attribute.</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Flag Name</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>DEDICATED</td>
<td>jobs should not share compute resources with any other job. These jobs will only run on nodes which are idle and will not allow other jobs to use resources on allocated nodes even if additional resources are available.</td>
</tr>
<tr class="row-odd"><td>NOBF</td>
<td>job cannot be considered for backfilled</td>
</tr>
<tr class="row-even"><td>NORESERVATION</td>
<td>job should never reserve resources regardless of priority</td>
</tr>
<tr class="row-odd"><td>PREEMPTEE</td>
<td>job may be preempted by higher priority PREEMPTOR jobs</td>
</tr>
<tr class="row-even"><td>PREEMPTOR</td>
<td>job may preempt lower priority PREEMPTEE jobs</td>
</tr>
<tr class="row-odd"><td>RESERVEALWAYS</td>
<td>job should create resource reservation regardless of job priority</td>
</tr>
<tr class="row-even"><td>RESTARTPREEMPT</td>
<td>jobs can preempt restartable jobs by essentially requeueing them if this allows the QOS job to start earlier</td>
</tr>
<tr class="row-odd"><td>USERESERVED[:&lt;RESID&gt;]</td>
<td>job may only utilize resources within accessible reservations. If &lt;RESID&gt; is specified, job may only utilize resources within the specified reservation.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="line-block">
<div class="line">&#8212;</div>
<div class="line"><code class="docutils literal"><span class="pre">QOSCFG[hiprio]</span> <span class="pre">QFLAGS=NOBF:PREEMPTEE</span></code></div>
<div class="line">&#8212;</div>
</div>
<p>Example 2:</p>
<div class="line-block">
<div class="line">&#8212;</div>
<div class="line"><code class="docutils literal"><span class="pre">QOSCFG[chem-b]</span> <span class="pre">QFLAGS=USERESERVED:chemistry</span></code></div>
<div class="line">&#8212;</div>
</div>
</div>
<div class="section" id="policy-exemptions">
<h3>7.3.2.3. Policy Exemptions<a class="headerlink" href="#policy-exemptions" title="Permalink to this headline">¶</a></h3>
<p>Individual QoS&#8217;s may be assigned override policies which will set new
policy limits regardless of user, group, account, or queue limits.
Particularly, the following policies may be overridden:</p>
<div class="line-block">
<div class="line"><strong>MAXJOB</strong></div>
<div class="line"><strong>MAXPROC</strong></div>
<div class="line"><strong>MAXNODE</strong></div>
</div>
<p>Example:</p>
<div class="line-block">
<div class="line">&#8212;</div>
<div class="line"><code class="docutils literal"><span class="pre">QOSCFG[staff]</span> <span class="pre">MAXJOB=48</span></code></div>
<div class="line">&#8212;</div>
</div>
<p>In addition to overriding policies, QoS&#8217;s may also be used to allow
particular jobs to ignore policies by setting the QoS <strong>FLAG</strong> attribute</p>
<p><strong>QOS Flags</strong></p>
<div class="line-block">
<div class="line">IGNJOBPERUSER</div>
<div class="line">IGNPROCPERUSER</div>
<div class="line">IGNPSPERUSER</div>
<div class="line">IGNJOBQUEUEDPERUSER</div>
<div class="line">IGNJOBPERGROUP</div>
<div class="line">IGNPROCPERGROUP</div>
<div class="line">IGNPSPERGROUP</div>
<div class="line">IGNJOBQUEUEDPERGROUP</div>
<div class="line">IGNJOBPERACCOUNT</div>
<div class="line">IGNPROCPERACCOUNT</div>
<div class="line">IGNPSPERACCOUNT</div>
<div class="line">IGNJOBQUEUEDPERACCOUNT</div>
<div class="line">IGNSYSMAXPROC</div>
<div class="line">IGNSYSMAXTIME</div>
<div class="line">IGNSYSMAXPS</div>
</div>
<p>IGNSRMAXTIME</p>
<p>jobs should ignore standing reservation MAXTIME constraints</p>
<p>IGNUSER</p>
<p>jobs should ignore all user throttling policies</p>
<p>IGNGROUP</p>
<p>jobs should ignore all group throttling policies</p>
<p>IGNACCOUNT</p>
<p>jobs should ignore all account throttling policies</p>
<p>IGNSYSTEM</p>
<p>jobs should ignore all system throttling policies</p>
<p>IGNALL</p>
<p>jobs should ignore all user, group, and account throttling policies</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Example</div>
</div>
<div class="line-block">
<div class="line">&#8212;</div>
<div class="line"><code class="docutils literal"><span class="pre">QOSCFG[express]</span> <span class="pre">QFLAGS=IGNSYSTEM</span></code></div>
<div class="line">&#8212;</div>
</div>
</div>
</div>
<div class="section" id="managing-qos-access">
<h2>7.3.3. Managing QoS Access<a class="headerlink" href="#managing-qos-access" title="Permalink to this headline">¶</a></h2>
<p>While defining the privileges allowed within a QoS is managed using the
<strong>QOSCFG</strong> parameter, actual access to the QoS is enabled via credential
specific <strong>*CFG</strong> parameters. Specifically, the
<a class="reference external" href="a.fparameters.html#usercfg">USERCFG</a>,
<a class="reference external" href="a.fparameters.html#groupcfg">GROUPCFG</a>,
<a class="reference external" href="a.fparameters.html#accountcfg">ACCOUNTCFG</a>, and
<a class="reference external" href="a.fparameters.html#classcfg">CLASSCFG</a> parameters allow QoS access
lists and QoS defaults to be defined. To enable QoS access, the
<strong>QLIST</strong> and/or <strong>QDEF</strong> attributes of the appropriate user, group,
account, or queue should be specified as in the example below:
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="c1"># user john&#39;s jobs can access QOS geo, chem, or staff with geo as default</span>
<span class="n">USERCFG</span><span class="p">[</span><span class="n">john</span><span class="p">]</span>     <span class="n">QDEF</span><span class="o">=</span><span class="n">geo</span>   <span class="n">QLIST</span><span class="o">=</span><span class="n">geo</span><span class="p">,</span><span class="n">chem</span><span class="p">,</span><span class="n">staff</span>

<span class="c1"># group system jobs can access the development qos</span>
<span class="n">GROUPCFG</span><span class="p">[</span><span class="n">systems</span><span class="p">]</span> <span class="n">QDEF</span><span class="o">=</span><span class="n">development</span>

<span class="c1"># class batch jobs can access the normal qos</span>
<span class="n">CLASSCFG</span><span class="p">[</span><span class="n">batch</span><span class="p">]</span>   <span class="n">QDEF</span><span class="o">=</span><span class="n">normal</span>
<span class="o">---</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default, jobs may request a QoS if access to that QoS is
allowed by <em>any</em> of the job&#8217;s credentials. (i.e., in the example above,
a job from user <code class="docutils literal"><span class="pre">john</span></code> submitted to the class <code class="docutils literal"><span class="pre">batch</span></code> could request
QoS&#8217;s <code class="docutils literal"><span class="pre">geo</span></code>, <code class="docutils literal"><span class="pre">chem</span></code>, <code class="docutils literal"><span class="pre">staff</span></code>, or <code class="docutils literal"><span class="pre">normal</span></code>)</p>
</div>
<p>See also:</p>
<div class="line-block">
<div class="line">N/A</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.3. Quality of Service (QoS) Facilities</a><ul>
<li><a class="reference internal" href="#qos-overview">7.3.1. QoS Overview</a></li>
<li><a class="reference internal" href="#qos-enabled-privileges">7.3.2. QoS Enabled Privileges</a><ul>
<li><a class="reference internal" href="#special-prioritization">7.3.2.1. Special Prioritization</a></li>
<li><a class="reference internal" href="#service-access-and-constraints">7.3.2.2. Service Access and Constraints</a></li>
<li><a class="reference internal" href="#policy-exemptions">7.3.2.3. Policy Exemptions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#managing-qos-access">7.3.3. Managing QoS Access</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="7.2partitions.html"
                        title="previous chapter">7.2. Partitions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="8.0optimizingschedulingbehavior.html"
                        title="next chapter">8. Optimizing Scheduling Behavior - Backfill, Node Sets, and Preemption</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/7.3qos.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="8.0optimizingschedulingbehavior.html" title="8. Optimizing Scheduling Behavior - Backfill, Node Sets, and Preemption"
             >next</a> |</li>
        <li class="right" >
          <a href="7.2partitions.html" title="7.2. Partitions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="7.0controllingresourceaccess.html" >7. 7.0 Controlling Resource Access - Reservations, Partitions, and QoS Facilities</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 1999-2014, Adaptive Computing Enterprises, Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
  </body>
</html>