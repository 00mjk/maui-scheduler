<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &mdash; Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sright"><div class="sub-content-head"><p>Moab Workload Manager</p>
<div id="sub-content-rpt" class="sub-content-rpt"><div id="tab-container" class="tab-container docs"><div class="topNav"><div class="docsSearch"><div class="navIcons topIcons"><p><a class="reference external" href="index.html"><img alt="Home" src="resources/docs/images/home.png" /></a> <a class="reference external" href="../a.gcommandoverview.html"><img alt="Up" src="resources/docs/images/upArrow.png" /></a>
<strong>Moab Workload Manager:sup:`®`</strong></p>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first last rubric" id="msub">msub</p>
</td>
<td><strong>(Moab Job Submit)</strong></td>
</tr>
</tbody>
</table>
<p><strong>Synopsis</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">msub</span>  <span class="p">[</span><span class="o">-</span><span class="n">a</span> <span class="n">datetime</span><span class="p">][</span><span class="o">-</span><span class="n">A</span> <span class="n">account</span><span class="p">][</span><span class="o">-</span><span class="n">c</span> <span class="n">interval</span><span class="p">][</span><span class="o">-</span><span class="n">C</span> <span class="n">directive_prefix</span><span class="p">][</span><span class="o">-</span><span class="n">d</span> <span class="n">path</span><span class="p">]</span>
      <span class="p">[</span><span class="o">-</span><span class="n">e</span> <span class="n">path</span><span class="p">][</span><span class="o">-</span><span class="n">E</span><span class="p">][</span><span class="o">-</span><span class="n">h</span><span class="p">][</span><span class="o">-</span><span class="n">I</span><span class="p">][</span><span class="o">-</span><span class="n">j</span> <span class="n">join</span><span class="p">][</span><span class="o">-</span><span class="n">k</span> <span class="n">keep</span><span class="p">][</span><span class="o">-</span><span class="n">K</span><span class="p">][</span><span class="o">-</span><span class="n">l</span> <span class="n">resourcelist</span><span class="p">][</span><span class="o">-</span><span class="n">m</span> <span class="n">mailoptions</span><span class="p">]</span>
      <span class="p">[</span><span class="o">-</span><span class="n">M</span> <span class="n">user_list</span><span class="p">][</span><span class="o">-</span><span class="n">N</span> <span class="n">name</span><span class="p">][</span><span class="o">-</span><span class="n">o</span> <span class="n">path</span><span class="p">][</span><span class="o">-</span><span class="n">p</span> <span class="n">priority</span><span class="p">][</span><span class="o">-</span><span class="n">q</span> <span class="n">destination</span><span class="p">][</span><span class="o">-</span><span class="n">r</span><span class="p">]</span>
      <span class="p">[</span><span class="o">-</span><span class="n">S</span> <span class="n">pathlist</span><span class="p">][</span><span class="o">-</span><span class="n">u</span> <span class="n">userlist</span><span class="p">][</span><span class="o">-</span><span class="n">v</span> <span class="n">variablelist</span><span class="p">][</span><span class="o">-</span><span class="n">V</span><span class="p">][</span><span class="o">-</span><span class="n">W</span> <span class="n">additionalattributes</span><span class="p">]</span>
      <span class="p">[</span><span class="o">-</span><span class="n">z</span><span class="p">][</span><span class="n">script</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Overview</strong></p>
<p><strong>msub</strong> allows users to submit jobs directly to Moab. When a job is
submitted directly to a resource manager (such as TORQUE), it is
constrained to run on only those nodes that the resource manager is
directly monitoring. In many instances, a site may be controlling
multiple resource managers. When a job is submitted to Moab rather than
to a specific resource manager, it is not constrained as to what nodes
it is executed on. <strong>msub</strong> can accept command line arguments (with the
same syntax as
<a class="reference external" href="http://www.adaptivecomputing.com/products/torque/docs/commands/qsub.html">qsub</a>),
job scripts (in either PBS or LoadLeveler syntax), or the SSS Job XML
specification.</p>
<p>Submitted jobs can then be viewed and controlled via the
<a class="reference external" href="mjobctl.html">mjobctl</a> command.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="Note" src="resources/docs/images/note.png" /></td>
<td>Flags specified in the following table are not necessarily supported by all resource managers.</td>
</tr>
</tbody>
</table>
<p><strong>Access</strong></p>
<p>When Moab is configured to run as root, any user may submit jobs via
msub.
<strong>Flags</strong></p>
<p><strong>-a</strong>
Name:
<strong>Eligible Date</strong>
Format:
[[[[CC]YY]MM]DD]hhmm[.SS]
Default:
&#8212;
Description:
Declares the time after which the job is eligible for execution.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">a</span> <span class="mi">12041300</span> <span class="n">cmd</span><span class="o">.</span><span class="n">pbs</span>
</pre></div>
</div>
<p>Moab will not schedule the job until 1:00 pm on December 4, of the
current year.</p>
<p><strong>-A</strong>
Name:
<strong>Account</strong>
Format:
&lt;ACCOUNT NAME&gt;
Default:
&#8212;
Description:
Defines the account associated with the job.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">A</span> <span class="n">research</span> <span class="n">cmd</span><span class="o">.</span><span class="n">pbs</span>
</pre></div>
</div>
<p>Moab will associate this job with account research.</p>
<p><strong>-c</strong>
Name:
<strong>Checkpoint Interval</strong>
Format:
[n|s|c|c=&lt;minutes&gt;]
Default:
&#8212;
Description:
Checkpoint of the will occur at the specified interval.
<strong>n</strong> — No Checkpoint is to be performed.
<strong>s</strong> — Checkpointing is to be performed only when the server executing
the job is shut down.
<strong>c</strong> — Checkpoint is to be performed at the default minimum time for
the server executing the job.
<strong>c=&lt;minutes&gt;</strong> — Checkpoint is to be performed at an interval of
minutes.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">c</span> <span class="n">c</span><span class="o">=</span><span class="mi">12</span> <span class="n">cmd</span><span class="o">.</span><span class="n">pbs</span>
</pre></div>
</div>
<p>The job will be checkpointed every 12 minutes.</p>
<p><strong>-C</strong>
Name:
<strong>Directive Prefix</strong>
Format:
&#8216;&lt;PREFIX NAME&gt;&#8217;
Default:
First known prefix (#PBS, #&#64;, #BSUB, #!, #MOAB, #MSUB)
Description:
Specifies which directive prefix should be used from a job script.</p>
<ul class="simple">
<li>It is best to submit with single quotes. &#8216;#PBS&#8217;</li>
<li>An empty prefix will cause Moab to not search for any prefix. -C &#8216;&#8217;</li>
<li>Command line arguments have precedence over script arguments.</li>
<li>Custom prefixes can be used with the -C flag. -C &#8216;#MYPREFIX&#8217;</li>
<li>Custom directive prefixes must use PBS syntax.</li>
<li>If the -C flag is not given, Moab will take the first default prefix
found. Once a directive is found, others are ignored.</li>
</ul>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">C</span> <span class="s1">&#39;#MYPREFIX&#39;</span> <span class="n">cmd</span><span class="o">.</span><span class="n">pbs</span>

<span class="c1">#MYPREFIX -l walltime=5:00:00 (in cmd.pbs)</span>
</pre></div>
</div>
<p>Moab will use the #MYPREFIX directive specified in cmd.pbs, setting the
wallclock limit to five hours.</p>
<p><strong>-d</strong>
Name:
<strong>Execution Directory</strong>
Format:
&lt;path&gt;
Default:
Depends on the RM being used. If using TORQUE, the default is $HOME. If
using SLURM, the default is the submission directory.
Description:
Specifies which directory the job should execute in.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">job12</span> <span class="n">cmd</span><span class="o">.</span><span class="n">pbs</span>
</pre></div>
</div>
<p>The job will begin execution in the <code class="docutils literal"><span class="pre">/home/test/job12</span></code> directory.</p>
<p><strong>-e</strong>
Name:
<strong>Error Path</strong>
Format:
[&lt;hostname&gt;:]&lt;path&gt;
Default:
$SUBMISSIONDIR/$JOBNAME.e$JOBID
Description:
Defines the path to be used for the standard error stream of the batch
job.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">e</span> <span class="n">test12</span><span class="o">/</span><span class="n">stderr</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The STDERR stream of the job will be placed in the relative (to
execution) directory specified.</p>
<p><strong>-E</strong>
Name:
<strong>Environment Variables</strong>
Format:
&#8212;
Default:
&#8212;
Description:
Moab adds the following variables, if populated, to the job&#8217;s
environment:</p>
<ul class="simple">
<li><strong>MOAB_ACCOUNT</strong>: Account name.</li>
<li><strong>MOAB_BATCH</strong>: Set if a batch job (non-interactive).</li>
<li><strong>MOAB_CLASS</strong>: Class name.</li>
<li><strong>MOAB_DEPEND</strong>: Job dependency string.</li>
<li><strong>MOAB_GROUP</strong>: Group name.</li>
<li><strong>MOAB_JOBID</strong>: Job ID. If submitted from the grid, grid jobid.</li>
<li><strong>MOAB_JOBNAME</strong>: Job name.</li>
<li><strong>MOAB_MACHINE</strong>: Name of the machine (ie. Destination RM) that the
job is running on.</li>
<li><strong>MOAB_NODECOUNT</strong>: Number of nodes allocated to job.</li>
<li><strong>MOAB_NODELIST</strong>: Comma-separated list of nodes (listed singly with
no ppn info).</li>
<li><strong>MOAB_PARTITION</strong>: Partition name the job is running in. If grid
job, cluster scheduler&#8217;s name.</li>
<li><strong>MOAB_PROCCOUNT</strong>: Number of processors allocated to job.</li>
<li><strong>MOAB_QOS</strong>: QOS name.</li>
<li><strong>MOAB_TASKMAP</strong>: Node list with procs per node listed.
&lt;nodename&gt;.&lt;procs&gt;</li>
<li><strong>MOAB_USER</strong>: User name.</li>
</ul>
<p>In SLURM environments, not all variables will be populated since the
variables are added at submission (such as NODELIST). With TORQUE/PBS,
the variables are added just before the job is started.</p>
<p>This feature only works with SLURM and TORQUE/PBS.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">E</span> <span class="n">mySim</span><span class="o">.</span><span class="n">cmd</span>
</pre></div>
</div>
<p>The job <em>mySim</em> will be submitted with extra environment variables.</p>
<p><strong>-h</strong>
Name:
<strong>Hold</strong>
Format:
N/A
Default:
&#8212;
Description:
Specifies that a user hold be applied to the job at submission time.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">h</span> <span class="n">cmd</span><span class="o">.</span><span class="n">ll</span>
</pre></div>
</div>
<p>The job will be submitted with a user hold on it.</p>
<p><strong>-I</strong>
Name:
<strong>Interactive</strong>
Format:
N/A
Default:
&#8212;
Description:
Declares the the job is to be run interactively.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">I</span> <span class="n">job117</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The job will be submitted in interactive mode.</p>
<p><strong>-j</strong>
Name:
<strong>Join</strong>
Format:
[oe|n]
Default:
n (not merged)
Description:
Declares if the standard error stream of the job will be merged with the
standard output stream of the job. If &#8220;oe&#8221; is specified, the error and
output streams will be merged into the output stream.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">j</span> <span class="n">oe</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>STDOUT and STDERR will be merged into one file.</p>
<p><strong>-k</strong>
Name:
<strong>Keep</strong>
Format:
[e|o|eo|oe|n]
Default:
n (not retained)
Description:
Defines which (if either) of output and error streams will be retained
on the execution host (overrides path for stream).
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">k</span> <span class="n">oe</span> <span class="n">myjob</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>STDOUT and STDERR for the job will be retained on the execution host.</p>
<p><strong>-K</strong>
Name:
<strong>Continue Running</strong>
Format:
N/A
Default:
&#8212;
Description:
Tells the client to continue running until the submitted job is
completed. The client will query the status of the job every 5 seconds.
The time interval between queries can be specified or disabled via
<a class="reference external" href="../a.fparameters.html#msubqueryinterval">MSUBQUERYINTERVAL</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="Note" src="resources/docs/images/note.png" /></td>
<td>Use the -K option SPARINGLY (if at all) as it slows down the Moab scheduler with frequent queries. Running ten jobs with the -K option creates an additional fifty queries per minute for the scheduler.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">K</span> <span class="n">newjob</span><span class="o">.</span><span class="n">sh</span>

<span class="mi">3</span>
<span class="n">Job</span> <span class="mi">3</span> <span class="n">completed</span><span class="o">*</span>
</pre></div>
</div>
<p>*Only shows up after job completion.</p>
<p><strong>-l</strong>
Name:
<strong>Resource List</strong>
Format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">STRING</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>(either <a class="reference external" href="http://www.adaptivecomputing.com/resources/torque/index.html20/2.1jobsubmission.html#resources">standard PBS/TORQUE
options</a>
or <a class="reference external" href="../13.3rmextensions.html">resource manager extensions</a>)
Default:
&#8212;
Description:
Defines the resources that are required by the job and establishes a
limit to the amount of resource that can be consumed. Either resources
native to the resource manager (see <a class="reference external" href="http://www.adaptivecomputing.com/resources/torque/index.html20/2.1jobsubmission.html#resources">PBS/TORQUE
resources</a>)
or scheduler <a class="reference external" href="../13.3rmextensions.html">resource manager extensions</a>
may be specified. Note that resource lists are dependent on the resource
manager in use.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">l</span> <span class="n">nodes</span><span class="o">=</span><span class="mi">32</span><span class="p">:</span><span class="n">ppn</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">pmem</span><span class="o">=</span><span class="mi">1800</span><span class="n">mb</span><span class="p">,</span><span class="n">walltime</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span><span class="n">VAR</span><span class="o">=</span><span class="n">testvar</span><span class="p">:</span><span class="n">myvalue</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The job requires 32 nodes with 2 processors each, 1800 MB per task, a
walltime of 3600 seconds, and a variable named testvar with a value of
myvalue.</p>
<p><strong>-m</strong>
Name:
<strong>Mail Options</strong>
Format:
[[n]|[a][b][e]]
Default:
&#8212;
Description:
Defines the set of conditions (abort,begin,end) when the server will
send a mail message about the job to the user.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">m</span> <span class="n">be</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Mail notifications will be sent when the job begins and ends.</p>
<p><strong>-M</strong>
Name:
<strong>Mail List</strong>
Format:
&lt;user&gt;[&#64;&lt;host&gt;][,&lt;user&gt;[&#64;&lt;host&gt;],...]
Default:
$JOBOWNER
Description:
Specifies the list of users to whom mail is sent by the execution
server.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">M</span> <span class="n">jon</span><span class="nd">@node01</span><span class="p">,</span><span class="n">bill</span><span class="nd">@node01</span><span class="p">,</span><span class="n">jill</span><span class="nd">@node02</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Mail will be sent to the specified users if the job is aborted.</p>
<p><strong>-N</strong>
Name:
<strong>Name</strong>
Format:
&lt;STRING&gt;
Default:
STDIN or name of job script
Description:
Specifies the user-specified job name attribute.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">N</span> <span class="n">chemjob3</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Job will be associated with the name chemjob3.</p>
<p><strong>-o</strong>
Name:
<strong>Output Path</strong>
Format:
[&lt;hostname&gt;:]&lt;path&gt;
Default:
$SUBMISSIONDIR/$JOBNAME.o$JOBID
Description:
Defines the path to be used for the standard output stream of the batch
job.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">o</span> <span class="n">test12</span><span class="o">/</span><span class="n">stdout</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The STDOUT stream of the job will be placed in the relative (to
execution) directory specified.</p>
<p><strong>-p</strong>
Name:
<strong>Priority</strong>
Format:
&lt;INTEGER&gt; (between -1024 and 0)
Default:
0
Description:
Defines the priority of the job.
To enable priority range from -1024 to +1023, see
<a class="reference external" href="../a.fparameters.html#enableposuserpriority">**ENABLEPOSUSERPRIORITY**</a>.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">p</span> <span class="mi">25</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The job will have a user priority of 25.</p>
<p><strong>-q</strong>
Name:
<strong>Destination Queue (Class)</strong>
Format:
[&lt;queue&gt;][&#64;&lt;server&gt;]
Default:
[&lt;DEFAULT&gt;]
Description:
Defines the destination of the job.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">q</span> <span class="n">priority</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The job will be submitted to the priority queue.</p>
<p><strong>-r</strong>
Name:
<strong>Rerunable</strong>
Format:
[y|n]
Default:
n
Description:
Declares whether the job is rerunable.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">r</span> <span class="n">n</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The job cannot be rerun.</p>
<p><strong>-S</strong>
Name:
<strong>Shell Path</strong>
Format:
&lt;path&gt;[&#64;&lt;host&gt;][,&lt;path&gt;[&#64;&lt;host&gt;],...]
Default:
$SHELL
Description:
Declares the shell that interprets the job script.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">S</span> <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">bash</span>
</pre></div>
</div>
<p>The job script will be interpreted by the <code class="docutils literal"><span class="pre">/bin/bash</span></code> shell.</p>
<p><strong>-u</strong>
Name:
<strong>User List</strong>
Format:
&lt;user&gt;[&#64;&lt;host&gt;[,&lt;user&gt;[&#64;&lt;host&gt;],...]
Default:
UID of msub command
Description:
Defines the user name under which the job is to run on the execution
system.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">u</span> <span class="n">bill</span><span class="nd">@node01</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>On node01 the job will run under Bill&#8217;s UID, if permitted.</p>
<p><strong>-v</strong>
Name:
<strong>Variable List</strong>
Format:
&lt;string&gt;[,&lt;string&gt;,...]
Default:
&#8212;
Description:
Expands the list the environment variables that are exported to the job
(taken from the msub command environment).
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">v</span> <span class="n">DEBUG</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The DEBUG environment variable will be defined for the job.</p>
<p><strong>-V</strong>
Name:
<strong>All Variables</strong>
Format:
N/A
Default:
N/A
Description:
Declares that all environment variables in the msub environment are
exported to the batch job
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">V</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>All environment variables will be exported to the job.</p>
<p><strong>-W</strong>
Name:
<strong>Additional Attributes</strong>
Format:
&lt;string&gt;
Default:
&#8212;
Description:
Allows the for the specification of additional job attributes (See
<a class="reference external" href="../13.3rmextensions.html">Resource Manager Extension</a>)
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">W</span> <span class="n">x</span><span class="o">=</span><span class="n">GRES</span><span class="p">:</span><span class="n">matlab</span><span class="p">:</span><span class="mi">1</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The job requires one resource of &#8220;matlab&#8221;.</p>
<p><strong>-z</strong>
Name:
<strong>Silent Mode</strong>
Format:
N/A
Default:
N/A
Description:
The job&#8217;s identifier will not be printed to stdout upon submission.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">z</span> <span class="n">cmd</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>No job identifier will be printout the stdout upon successful
submission.
<strong>Job Script</strong></p>
<p>&nbsp;&nbsp; The <strong>msub</strong> command supports job scripts written in any one of the
following languages:</p>
<p>Language
Notes
<a class="reference external" href="http://www.adaptivecomputing.com/resources/torque/index.html/commands/qsub.html">PBS/TORQUE Job Submission
Language</a>
&#8212;
<a class="reference external" href="http://publib.boulder.ibm.com/infocenter/clresctr/index.jsp?topic=/com.ibm.cluster.loadl.doc/loadl33/am2ug30223.html">LoadLeveler Job Submission
Language</a>
Use the <a class="reference external" href="../a.fparameters.html#instantstage">INSTANTSTAGE</a> parameter
as only a subset of the command file keywords are interpreted by Moab.
<a class="reference external" href="../SSSJobObject_3.0.9.pdf">SSS XML Job Object Specification</a>
&#8212;
LSF Job Submission Language
enabled in Moab 4.2.4 and higher
<strong>/etc/msubrc</strong></p>
<p>Sites that wish to automatically add parameters to every job submission
can populate the file &#8216;/etc/msubrc&#8217; with global parameters that every
job submission will inherit.</p>
<p>For example, if a site wished every job to request a particular generic
resource they could use the following /etc/msubrc:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">W</span> <span class="n">x</span><span class="o">=</span><span class="n">GRES</span><span class="p">:</span><span class="n">matlab</span><span class="p">:</span><span class="mi">2</span>
</pre></div>
</div>
<p><strong>Usage Notes</strong></p>
<p><strong>msub</strong> is designed to be as flexible as possible, allowing users
accustomed to PBS, LSF, or LoadLeveler syntax, to continue submitting
jobs as they normally would. It is not recommended that different styles
be mixed together in the same <strong>msub</strong> command.</p>
<p>When only one resource manager is configured inside of Moab, all jobs
are immediately staged to the only resource manager available. However,
when multiple resource managers are configured Moab will determine which
resource manager can run the job soonest. Once this has been determined,
Moab will stage the job to the resource manager.</p>
<p>It is possible to have Moab take a &#8220;best effort&#8221; approach at submission
time using the <strong>*forward*</strong> flag. When this flag is specified, Moab
will do a quick check and make an intelligent guess as to which resource
manager can run the job soonest and then immediately stage the job.</p>
<p>Moab can be configured to instantly stage a job to the underlying
resource manager (like TORQUE/LOADLEVELER) through the parameter
<a class="reference external" href="../a.fparameters.html#instantstage">INSTANTSTAGE</a>. When set inside
<em>moab.cfg</em>, Moab will migrate the job instantly to an appropriate
resource manager. Once migrated, Moab will destroy all knowledge of the
job and refresh itself based on the information given to it from the
underlying resource manager.</p>
<p>In most instances Moab can determine what syntax style the job belongs
to (PBS or LoadLeveler); if Moab is unable to make a guess, it will
default the style to whatever resource manager was configured at compile
time. If LoadLeveler and PBS were both compiled then LoadLeveler takes
precedence.</p>
<p>Moab can translate a subset of job attributes from one syntax to
another. It is therefore possible to submit a PBS style job to a
LoadLeveler resource manager, and vice versa, though not all job
attributes will be translated.</p>
<p><strong>Example 1</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">msub</span> <span class="o">-</span><span class="n">l</span> <span class="n">nodes</span><span class="o">=</span><span class="mi">3</span><span class="p">:</span><span class="n">ppn</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">walltime</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">,</span><span class="n">pmem</span><span class="o">=</span><span class="mi">100</span><span class="n">kb</span> <span class="n">script2</span><span class="o">.</span><span class="n">pbs</span><span class="o">.</span><span class="n">cmd</span>

<span class="mf">4364.</span><span class="n">orion</span>
</pre></div>
</div>
<p><strong>Example 2</strong></p>
<p>Example 2 is the XML-formatted version of Example 1. See <a class="reference external" href="../msub_xml_format.html">Submitting
Jobs via msub in XML</a> for more information.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">job</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">InitialWorkingDirectory</span><span class="o">&gt;/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">perlAPI</span><span class="o">&lt;/</span><span class="n">InitialWorkingDirectory</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Executable</span><span class="o">&gt;/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">perlAPI</span><span class="o">/</span><span class="n">script2</span><span class="o">.</span><span class="n">pbs</span><span class="o">.</span><span class="n">cmd</span><span class="o">&lt;/</span><span class="n">Executable</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">SubmitLanguage</span><span class="o">&gt;</span><span class="n">PBS</span><span class="o">&lt;/</span><span class="n">SubmitLanguage</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Requested</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Feature</span><span class="o">&gt;</span><span class="n">ppn2</span><span class="o">&lt;/</span><span class="n">Feature</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Processors</span><span class="o">&gt;</span><span class="mi">3</span><span class="o">&lt;/</span><span class="n">Processors</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">WallclockDuration</span><span class="o">&gt;</span><span class="mi">3600</span><span class="o">&lt;/</span><span class="n">WallclockDuration</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">Requested</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">job</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>See Also</strong></p>
<ul class="simple">
<li><a class="reference external" href="../2.2installation.html#client">Moab Client Installation</a> -
explains how to distribute this command to client nodes</li>
<li><a class="reference external" href="mjobctl.html">mjobctl</a> command to view, modify, and cancel jobs</li>
<li><a class="reference external" href="checkjob.html">checkjob</a> command to view detailed information
about the job</li>
<li><a class="reference external" href="mshow.html">mshow</a> command to view all jobs in the queue</li>
<li><a class="reference external" href="../a.fparameters.html#defaultsubmitlanguage">DEFAULTSUBMITLANGUAGE</a>
parameter</li>
<li><a class="reference external" href="../a.fparameters.html#msubqueryinterval">MSUBQUERYINTERVAL</a>
parameter</li>
<li><a class="reference external" href="../a.fparameters.html#submitfilter">SUBMITFILTER</a> parameter</li>
<li><a class="reference external" href="../msub_submitfilter.html">Applying the msub Submit Filter</a> for
job script sample</li>
</ul>
<div class="navIcons bottomIcons"><p><a class="reference external" href="index.html"><img alt="Home" src="resources/docs/images/home.png" /></a> <a class="reference external" href="../a.gcommandoverview.html"><img alt="Up" src="resources/docs/images/upArrow.png" /></a></p>
<div class="sub-content-btm">

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/commands/msub.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 1999-2014, Adaptive Computing Enterprises, Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
  </body>
</html>