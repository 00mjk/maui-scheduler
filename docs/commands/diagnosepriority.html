<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &mdash; Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p class="rubric" id="diagnose-p">diagnose -p</p>
<p><strong>(Maui Priority Diagnostic)</strong></p>
<p class="rubric" id="overview">Overview:</p>
<p>The &#8216;diagnose -p&#8217; command is used to display &#8216;at a glance&#8217; information
about the job priority configuration and its effects on the current idle
jobs. The information presented by this command includes priority
weights, priority components, and the percentage contribution of each
component to the total job priority.</p>
<div class="line-block">
<div class="line">The command hides information about priority components which have
been deactivated (ie, by setting the corresponding component priority
weight to 0). For each displayed priority component, this command
gives a small amount of context sensitive information. The following
table documents this information. In all cases, the output is of the
form &lt;PERCENT&gt;(&lt;CONTEXT INFO) where &lt;PERCENT&gt; is the percentage
contribution of the associated priority component to the job&#8217;s total
priority.</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="30%" />
<col width="55%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Priority Component</td>
<td>Format</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>Target</td>
<td>&lt;PERCENT&gt;()</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>QOS</td>
<td>&lt;PERCENT&gt;(&lt;QOS&gt;:&lt;QOSPRI&gt;)</td>
<td>QOS: QOS associated with job
QOSPRI: Priority assigned to the QOS</td>
</tr>
<tr class="row-even"><td>FairShare</td>
<td>&lt;PERCENT&gt;(&lt;USR&gt;:&lt;GRP&gt;:&lt;ACC&gt;:&lt;QOS&gt;:&lt;CLS&gt;)</td>
<td>USR: user fs usage - user fs target
GRP: group fs usage - group fs target
ACC: account fs usage - account fs target
QOS: QOS fs usage - QOS fs target
CLS: class fs usage - class fs target</td>
</tr>
<tr class="row-odd"><td>QueueTime</td>
<td>&lt;PERCENT&gt;(&lt;HOURS&gt;)</td>
<td>HOURS: job queue time which is applicable towards priority</td>
</tr>
<tr class="row-even"><td>Expansion Factor</td>
<td>&lt;PERCENT&gt;(&lt;VALUE&gt;)</td>
<td>VALUE: current theoretical minimum XFactor is job were to start immediately</td>
</tr>
<tr class="row-odd"><td>Resource</td>
<td>&lt;PERCENT&gt;(&lt;NDE&gt;:&lt;PE&gt;:&lt;PRC&gt;:&lt;MEM&gt;)</td>
<td>NDE: nodes requested by job
PE: Processor Equivalents as calculated by all resources requested by job
PRC: processors requested by job
MEM: real memory requested by job</td>
</tr>
<tr class="row-even"><td>Bypass</td>
<td>&lt;PERCENT&gt;(&lt;BPCOUNT&gt;)</td>
<td>BPCOUNT: number of time job was bypassed by lower priority jobs via backfill</td>
</tr>
<tr class="row-odd"><td>User</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Group</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<p>&gt; diagnose -p</p>
<p><code class="docutils literal"><span class="pre">diagnosing</span> <span class="pre">job</span> <span class="pre">priority</span> <span class="pre">information</span> <span class="pre">(partition:</span> <span class="pre">ALL)</span></code></p>
<div class="line-block">
<div class="line">`` Job PRIORITY* QOS(Q:QOSPri) FS(USR:GRP:ACC) QTime(Hours) XFactor( Value) Resource(NDE: PE:PRC:MEM)``</div>
<div class="line"><code class="docutils literal"><span class="pre">Weights</span> <span class="pre">--------</span> <span class="pre">1000(-:------)</span> <span class="pre">100(</span> <span class="pre">1:</span> <span class="pre">1:</span> <span class="pre">1)</span> <span class="pre">2(-----)</span> <span class="pre">1000(------)</span> <span class="pre">800(</span> <span class="pre">0:</span> <span class="pre">0:</span> <span class="pre">1:</span> <span class="pre">0)</span></code></div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1300.0</span> <span class="pre">52203</span> <span class="pre">0.00(1:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.00(000.0)</span> <span class="pre">1.92(001.00)</span> <span class="pre">98.08(064:064:064:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1301.0</span> <span class="pre">26603</span> <span class="pre">0.00(1:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.00(000.0)</span> <span class="pre">3.77(001.00)</span> <span class="pre">96.23(032:032:032:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr1n04.2068.0</span> <span class="pre">13802</span> <span class="pre">0.00(1:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.00(000.0)</span> <span class="pre">7.25(001.00)</span> <span class="pre">92.74(016:016:016:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr1n04.2067.0</span> <span class="pre">7403</span> <span class="pre">0.00(0:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.01(000.0)</span> <span class="pre">13.54(001.00)</span> <span class="pre">86.45(008:008:008:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr1n04.2059.0</span> <span class="pre">4328</span> <span class="pre">0.00(5:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">26.00(001.12)</span> <span class="pre">73.95(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr1n04.2060.0</span> <span class="pre">4328</span> <span class="pre">0.00(5:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">26.00(001.12)</span> <span class="pre">73.95(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr1n04.2061.0</span> <span class="pre">4328</span> <span class="pre">0.00(5:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">26.00(001.12)</span> <span class="pre">73.95(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1289.0</span> <span class="pre">4328</span> <span class="pre">0.00(5:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">26.00(001.12)</span> <span class="pre">73.95(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1290.0</span> <span class="pre">4328</span> <span class="pre">0.00(5:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">26.00(001.12)</span> <span class="pre">73.95(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr1n04.2062.0</span> <span class="pre">4328</span> <span class="pre">0.00(5:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">26.00(001.12)</span> <span class="pre">73.95(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1291.0</span> <span class="pre">4328</span> <span class="pre">0.00(5:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">26.00(001.12)</span> <span class="pre">73.95(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1253.0</span> <span class="pre">4225</span> <span class="pre">0.00(1:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.25(000.1)</span> <span class="pre">24.01(001.01)</span> <span class="pre">75.74(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1256.0</span> <span class="pre">4225</span> <span class="pre">0.00(0:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.25(000.1)</span> <span class="pre">24.01(001.01)</span> <span class="pre">75.74(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1294.0</span> <span class="pre">4208</span> <span class="pre">0.00(0:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.06(000.0)</span> <span class="pre">23.89(001.01)</span> <span class="pre">76.05(004:004:004:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1293.0</span> <span class="pre">1848</span> <span class="pre">0.00(0:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.57(000.1)</span> <span class="pre">56.14(001.04)</span> <span class="pre">43.29(001:001:001:000)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">fr8n01.1260.0</span> <span class="pre">1814</span> <span class="pre">0.00(0:000000)</span> <span class="pre">0.00(000:000:000)</span> <span class="pre">0.58(000.1)</span> <span class="pre">55.32(001.00)</span> <span class="pre">44.10(001:001:001:000)</span></code></div>
</div>
<p><code class="docutils literal"><span class="pre">Totals</span> <span class="pre">100.00</span> <span class="pre">0.00</span> <span class="pre">0.00</span> <span class="pre">0.04</span> <span class="pre">11.57</span> <span class="pre">88.39</span></code></p>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">*</span> <span class="pre">indicates</span> <span class="pre">system</span> <span class="pre">prio</span> <span class="pre">set</span> <span class="pre">on</span> <span class="pre">job</span></code></div>
</div>
<p>Note that the above output is fairly lengthy. You may need to widen your
browser to properly read it. (Likewise, you may need to expand your
terminal to read the actual command output!) As mentioned previously,
the &#8216;diagnose -p&#8217; command only displays information for priority
components actually utilized. In the above example, QOS, Fairshare,
QueueTime, ExpansionFactor, and Resource components are all utilized in
determining a job&#8217;s priority. Other components, such as Service Targets,
and Bypass are not used and thus are not displayed. (See the &#8216;<a class="reference external" href="../mauiadmin.html#jobprioritization">Priority
Overview</a>&#8216; for more information)
The output consists of a header, a job by job analysis of idle jobs, and
a summary section.</p>
<p>The header provides column labeling and provides configured priority
component and subcomponent weights. In the above example, QOSWEIGHT is
set to 1000 and FSWEIGHT is set to 100. When configuring fairshare, a
site also has the option of weighting the individual components of a
job&#8217;s overall fairshare, including its user, group, and account
fairshare components. In this output, the user, group, and account
fairshare weights are set to 5, 1, and 1 respectively.</p>
<p>The job by job analysis displays a job&#8217;s total priority and the
percentage contribution to that priority of each of the priority
components. In this example, job &#8216;fr8n01.1260.0&#8217; has a total priority of
1814. Neither QOS nor Fairshare contribute to any of the job&#8217;s in the
queue because there is not a QOS priority set for QOS 0, 1, or 5. Also,
no fairshare targets are set for any of the users, groups, or accounts
associated with any of the jobs currently idle. Things finally get
interesting when we get to the queue time component column. Job
&#8216;fr8n01.1260.0&#8217; has only been queued for 0.1 hours, contributing a total
of 0.58% of its total priority (ie, 0.0058 * 1814 = ~10 priority
points). The Expansion Factor component is much more significant,
contributing 55.32% of this job&#8217;s total priority or .5532 * 1814 =
~1004 priority points. (Note the priority weights of 2 for Queuetime and
1000 for XFactor affecting the relative contributions of each of these
components) The final priority component, &#8216;Resource&#8217;, only has one
active subcomponent, processors (Note that nodes, PEs, and memory are
deactivated by zero priority subcomponent weights). For the job we are
analyzing, the resource component contributes 44.1% of the job&#8217;s total
priority or .4410 * 1814 = ~800 priority points. As expects, the
percentages sum to 100 and the corresponding priority points sum to
1814.</p>
<p>At the end of the job by job description, a &#8216;Totals&#8217; line is displayed
which documents the average percentage contributions of each priority
component to the current idle jobs. In this example, the queuetime,
xfactor, and resource components contributed an average of 0.04%,
11.57%, and 88.39% to the idle jobs&#8217; total priorities.</p>
<div class="navIcons topIcons"><p><a href="#id1"><span class="problematic" id="id2">|Home|</span></a> <a href="#id3"><span class="problematic" id="id4">|Up|</span></a></p>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/commands/diagnosepriority.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 1999-2014, Adaptive Computing Enterprises, Inc; 2016, Temple HPC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
  </body>
</html>