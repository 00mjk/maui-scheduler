<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.1.1. Reservation Overview &mdash; Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation" href="index.html" />
    <link rel="up" title="7.1. Advance Reservations" href="7.1advancereservations.html" />
    <link rel="next" title="7.1.2. Administrative Reservations" href="7.1.2adminreservations.html" />
    <link rel="prev" title="7.1. Advance Reservations" href="7.1advancereservations.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="7.1.2adminreservations.html" title="7.1.2. Administrative Reservations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="7.1advancereservations.html" title="7.1. Advance Reservations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="7.0controllingresourceaccess.html" >7. 7.0 Controlling Resource Access - Reservations, Partitions, and QoS Facilities</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="7.1advancereservations.html" accesskey="U">7.1. Advance Reservations</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="reservation-overview">
<h1>7.1.1. Reservation Overview<a class="headerlink" href="#reservation-overview" title="Permalink to this headline">¶</a></h1>
<p>Every reservation consists of 3 major components, a set of <em>resources</em>,
a <em>timeframe</em>, and an <em>access control list</em>. Additionally, a reservation
may also have a number of optional attributes controlling its behavior
and interaction with other aspects of scheduling. All reservation
attributes are described below.</p>
<div class="section" id="resources">
<h2>7.1.1.1. Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<p>Under Maui, the resources specified for a reservation are specified by
way of a <a class="reference external" href="3.2environment.html#taskdescription">task</a> description.
Conceptually, a task can be thought of as an atomic, or indivisible,
collection of resources. The resources may include processors, memory,
swap, local disk, etc. For example, a single task may consist of one
processor, 2 GB of memory, and 10 GB of local disk. A reservation
consists of one or more tasks. In attempting to locate the resources
required for a particular reservation, Maui will examine all feasible
resources and locate the needed resources in groups specified by the
task description. An example may help clarify this concept:</p>
<p>Reservation A requires 4 tasks. Each task is defined as 1 processor and
1 GB of memory.</p>
<div class="line-block">
<div class="line">Node X has 2 processors and 3 GB of memory available</div>
<div class="line">Node Y has 2 processors and 1 GB of memory available</div>
<div class="line">Node Z has 2 processors and 2 GB of memory available</div>
</div>
<p>In attempting to collect the resources needed for the reservation, Maui
would examine each node in turn. Maui finds that Node X can support 2 of
the 4 tasks needed by reserving 2 processors and 2 GB of memory, leaving
1 GB of memory unreserved. Analysis of Node Y shows that it can only
support 1 task reserving 1 processor and 1 GB of memory, leaving 1
processor unreserved. Note that the unreserved memory on Node X cannot
be combined with the unreserved processor on Node Y to satisfy the needs
of another task because a task requires all resources to be located on
the same node. Finally, analysis finds that node Z can support 2 tasks,
fully reserving all of its resources.</p>
<p>Both reservations and jobs use the concept of a task description in
specifying how resources should be allocated. It is important to note
that although a task description is used to allocate resources to a
reservation, this description does not in any way constrain the use of
those resources by a job. In the above example, a job requesting
resources simply sees 4 processors and 4 GB of memory available in
reservation A. If the job has access to the reserved resources and the
resources meet the other requirements of the job, the job could utilize
these resources according to its own task description and needs.</p>
<p>Currently, the resources which can be associated with reservations
include processors, memory, swap, local disk, initiator classes, and any
number of arbitrary resources. Arbitrary resources may include
peripherals such as tape drives, software licenses, or any other site
specific resource.</p>
</div>
<div class="section" id="timeframe">
<h2>7.1.1.2. TimeFrame<a class="headerlink" href="#timeframe" title="Permalink to this headline">¶</a></h2>
<p>Associated with each reservation is a timeframe. This specifies when the
resources will be reserved or dedicated to jobs which meet the
reservation&#8217;s ACL. The timeframe simply consists of a start time and an
end time. When configuring a reservation, this information may be
specified as a start time together with either an end time or a
duration.</p>
</div>
<div class="section" id="access-control-list">
<h2>7.1.1.3. Access Control List<a class="headerlink" href="#access-control-list" title="Permalink to this headline">¶</a></h2>
<p>A reservation&#8217;s access control list specifies which jobs can use a
reservation. Only jobs which meet one or more of a reservation&#8217;s access
criteria are allowed to use the reserved resources during the
reservation timeframe. Currently, the reservation access criteria
include the following: users, groups, accounts, classes, QOS, and job
duration.</p>
</div>
<div class="section" id="job-to-reservation-mapping">
<h2>7.1.1.4. Job to Reservation Mapping<a class="headerlink" href="#job-to-reservation-mapping" title="Permalink to this headline">¶</a></h2>
<p>While a reservation&#8217;s ACL will allow particular jobs to utilize reserved
resources, it does not force any job to utilize these resources. With
each job, Maui attempts to locate the best possible combination of
available resources whether these are reserved or unreserved. For
example, in the figure below, note that job <strong>X</strong>, which meets access
criteria for both reservation <strong>A</strong> and <strong>B</strong>, allocates a portion of
its resources from each reservation and the remainder from resources
outside of both reservations.<a class="reference internal" href="images/resaffinity1.gif"><img alt="image4" src="images/resaffinity1.gif" style="width: 302px; height: 180px;" /></a></p>
<p>Although by default, reservations make resources available to jobs which
meet particular criteria, Maui can be configured to constrain jobs to
only run within accessible reservations. This can be requested by the
user on a job by job basis using a resource manager extension flag or
can be enabled administratively via a QoS flag. For example, assume two
reservations were created as shown below.</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">setres</span> <span class="pre">-g</span> <span class="pre">staff</span> <span class="pre">-d</span> <span class="pre">8:00:00</span> <span class="pre">'node[1-4]'</span></code><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">``</span></a></p>
<p><code class="docutils literal"><span class="pre">reservation</span> <span class="pre">'staff.1'</span> <span class="pre">created</span> <span class="pre">on</span> <span class="pre">4</span> <span class="pre">nodes</span></code></p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">setres</span> <span class="pre">-u</span> <span class="pre">john</span> <span class="pre">tasks==2</span></code><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">``</span></a></p>
<p><code class="docutils literal"><span class="pre">reservation</span> <span class="pre">'john.1'</span> <span class="pre">created</span> <span class="pre">on</span> <span class="pre">two</span> <span class="pre">nodes</span></code><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">``</span></a></p>
<p>If the user <code class="docutils literal"><span class="pre">john</span></code>, who happened to also be a member of the group
<code class="docutils literal"><span class="pre">staff</span></code>, wanted to force his job to run within a particular
reservation, he could do so using the <strong>FLAGS</strong> <a class="reference external" href="13.3rmextensions.html">resource manager
extension</a>. Specifically, in the case of a PBS
job, the following submission would force the job to run within the
<code class="docutils literal"><span class="pre">staff.1</span></code> reservation.</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">qsub</span> <span class="pre">-l</span> <span class="pre">nodes=1,walltime=1:00:00</span> <span class="pre">-W</span> <span class="pre">x=FLAGS:ADVRES:staff.1</span> <span class="pre">testjob.cmd</span></code></p>
<p>Note that for this to work, PBS will need to have resource manager
extensions enabled as described in the <a class="reference external" href="13.3.1pbsrmextensions.html">PBS Resource Manager Extension
Overview</a>. If the user simply wants the
job to run on reserved resources but does not care which, he could
submit the job with</p>
<p><code class="docutils literal"><span class="pre">&gt;</span></code>
<code class="docutils literal"><span class="pre">qsub</span> <span class="pre">-l</span> <span class="pre">nodes=1,walltime=1:00:00</span> <span class="pre">-W</span> <span class="pre">x=FLAGS:ADVRES</span> <span class="pre">testjob.cmd</span></code><a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">``</span></a></p>
<p>To enable job to reservation mapping via <a class="reference external" href="7.3qos.html">QoS</a>, the QoS
flag &#8216;<strong>USERRESERVED</strong>&#8216; should be set in a similar manner.<a href="#id17"><span class="problematic" id="id18">**</span></a><a href="#id19"><span class="problematic" id="id20">**</span></a></p>
</div>
<div class="section" id="reservation-specification">
<h2>7.1.1.5. Reservation Specification<a class="headerlink" href="#reservation-specification" title="Permalink to this headline">¶</a></h2>
<p>There are two main types of reservations which sites typically deal
with. The first, <em>administrative</em> reservations, are typically one time
reservations created for special purposes and projects. These
reservations are created using the <a class="reference external" href="commands/setres.html">setres</a>
command. These reservations provide an integrated mechanism to allow
graceful management of unexpected system maintenance, temporary
projects, and time critical demonstrations. This command allows an
administrator to select a particular set of resources or just specify
the quantity of resources needed. For example an administrator could use
a regular expression to request a reservation be created on the nodes
&#8216;blue0[1-9]&#8217; or could simply request that the reservation locate the
needed resources by specifying a quantity based request such as
&#8216;TASKS==20&#8217;.</p>
<p>The second type of reservation is called a <em>standing</em> reservation. It is
of use when there is a recurring need for a particular type of resource
distribution. For example, a site could use a standing reservation to
reserve a subset of its compute resources for quick turnaround jobs
during business hours on Monday thru Friday. Standing reservations are
created and configured by specifying parameters in the maui.cfg file.
The <a class="reference external" href="7.1.3standingreservations.html">Standing Reservation Overview</a>
provides more information about configuring and using these
reservations.</p>
</div>
<div class="section" id="reservation-behavior">
<h2>7.1.1.6. Reservation Behavior<a class="headerlink" href="#reservation-behavior" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, a given reservation may have one or more access
criteria. A job can utilize the reserved resources if it meets at least
one of these access criteria. It is possible to &#8216;stack&#8217; multiple
reservations on the same node. In such a situation, a job can only
utilize the given node if it meets at least access criteria of each
active reservation on the node.</p>
</div>
<div class="section" id="other-reservation-attributes">
<h2>7.1.1.7. Other Reservation Attributes<a class="headerlink" href="#other-reservation-attributes" title="Permalink to this headline">¶</a></h2>
<p>Charge Account - Allows a reservation to charge for resources which are
dedicated to the reservation but not used by any job.</p>
<p>See also:</p>
<p>N/A</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.1.1. Reservation Overview</a><ul>
<li><a class="reference internal" href="#resources">7.1.1.1. Resources</a></li>
<li><a class="reference internal" href="#timeframe">7.1.1.2. TimeFrame</a></li>
<li><a class="reference internal" href="#access-control-list">7.1.1.3. Access Control List</a></li>
<li><a class="reference internal" href="#job-to-reservation-mapping">7.1.1.4. Job to Reservation Mapping</a></li>
<li><a class="reference internal" href="#reservation-specification">7.1.1.5. Reservation Specification</a></li>
<li><a class="reference internal" href="#reservation-behavior">7.1.1.6. Reservation Behavior</a></li>
<li><a class="reference internal" href="#other-reservation-attributes">7.1.1.7. Other Reservation Attributes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="7.1advancereservations.html"
                        title="previous chapter">7.1. Advance Reservations</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="7.1.2adminreservations.html"
                        title="next chapter">7.1.2. Administrative Reservations</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/7.1.1resoverview.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="7.1.2adminreservations.html" title="7.1.2. Administrative Reservations"
             >next</a> |</li>
        <li class="right" >
          <a href="7.1advancereservations.html" title="7.1. Advance Reservations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="7.0controllingresourceaccess.html" >7. 7.0 Controlling Resource Access - Reservations, Partitions, and QoS Facilities</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="7.1advancereservations.html" >7.1. Advance Reservations</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 1999-2014, Adaptive Computing Enterprises, Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
  </body>
</html>