<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.1.4. Reservation Policies &mdash; Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation" href="index.html" />
    <link rel="up" title="7.1. Advance Reservations" href="7.1advancereservations.html" />
    <link rel="next" title="7.1.5. Configuring and Managing Reservations" href="7.1.5managingreservations.html" />
    <link rel="prev" title="7.1.3. Standing Reservations" href="7.1.3standingreservations.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="7.1.5managingreservations.html" title="7.1.5. Configuring and Managing Reservations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="7.1.3standingreservations.html" title="7.1.3. Standing Reservations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="7.0controllingresourceaccess.html" >7. 7.0 Controlling Resource Access - Reservations, Partitions, and QoS Facilities</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="7.1advancereservations.html" accesskey="U">7.1. Advance Reservations</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="reservation-policies">
<h1>7.1.4. Reservation Policies<a class="headerlink" href="#reservation-policies" title="Permalink to this headline">¶</a></h1>
<p>In addition to standing and administrative reservations, Maui can also
create <em>priority</em> reservations. These reservations are used to allow the
benefits of out-of-order execution (such as is available with
<a class="reference external" href="8.2backfill.html">backfill</a>) without the side effect of job
starvation. Starvation can occur in any system where the potential
exists for a job to be overlooked by the scheduler for an indefinite
period. In the case of backfill, small jobs may continue to be run on
available resources as they become available while a large job sits in
the queue never able to find enough nodes available simultaneously to
run on. To avoid such situations, priority reservations are created for
high priority jobs which cannot run immediately. When making these
reservations, the scheduler determines the earliest time the job could
start, and then reserves these resources for use by this job at that
future time.</p>
<p>By default, only the highest priority job will receive a priority
reservation. However, this behavior is configurable via the
<a class="reference external" href="a.fparameters.html#reservationdepth">RESERVATIONDEPTH</a> policy.
Maui&#8217;s default behavior of only reserving the highest priority job
allows backfill to be used in a form known as <em>liberal</em> backfill. This
liberal backfill tends to maximize system utilization and minimize
overall average job turnaround time. However, it does lead to the
potential of some lower priority jobs being indirectly delayed and may
lead to greater variance in job turnaround time. The
<strong>RESERVATIONDEPTH</strong> parameter can be set to a very large value,
essentially enabling what is called <em>conservative</em> backfill where every
job which cannot run is given a reservation. Most sites prefer the
liberal backfill approach associated with the default
<strong>RESERVATIONDEPTH</strong> of 1 or select a slightly higher value. It is
important to note that to prevent starvation in conjunction with
reservations, monotonically increasing priority factors such as
queuetime or job xfactor should be enabled. See the <a class="reference external" href="11.2jobpriority.html">Prioritization
Overview</a> for more information on priority
factors.</p>
<p>Another important consequence of backfill and reservation depth is its
affect on job priority. In Maui, all jobs are prioritized. Backfill
allows jobs to be run out of order and thus, to some extent, job
priority to be ignored. This effect, known as &#8216;priority dilution&#8217; can
cause many site policies implemented via Maui prioritization policies to
be ineffective. Setting the <strong>RESERVATIONDEPTH</strong> parameter to a higher
value will give job priority &#8216;more teeth&#8217; at the cost of slightly lower
system utilization. This lower utilization results from the constraints
of these additional reservations, decreasing the scheduler&#8217;s freedom and
its ability to find additional optimizing schedules. Anecdotal evidence
indicates that these utilization losses are fairly minor, rarely
exceeding 8%.</p>
<p>In addition to <strong>RESERVATIONDEPTH</strong>, sites also have the ability to
control how reservations are maintained. Maui&#8217;s dynamic job
prioritization allows sites to prioritize jobs so that their priority
order can change over time. It is possible that one job can be at the
top of the priority queue for a time, and then get bypassed by another
job submitted later. The parameter
<a class="reference external" href="a.fparameters.html#reservationpolicy">RESERVATIONPOLICY</a> allows a
site to determine what how existing reservations should be handled when
new reservations are made. The value <strong>HIGHEST</strong> will cause that all
jobs which have ever received a priority reservation will maintain that
reservation until they run even if other jobs later bypass them in
priority value. The value <strong>CURRENTHIGHEST</strong> will cause that only the
current top &lt;RESERVATIONDEPTH&gt; priority jobs will receive reservations.
If a job had a reservation but has been bypassed in priority by another
job so that it no longer qualifies as being amongst the top
&lt;RESERVATIONDEPTH&gt; jobs, it will lose its reservation. Finally, the
value <strong>NEVER</strong> indicates that no priority reservations will be made.</p>
<p>QOS based reservation depths can be enabled via the
<a class="reference external" href="a.fparameters.html#reservationqoslist">RESERVATIONQOSLIST</a>
parameter. This parameter allows varying reservation depths to be
associated with different sets of job QoS&#8217;s. For example, the following
configuration will create two reservation depth <em>groupings</em>:</p>
<div class="line-block">
<div class="line">&#8212;-</div>
<div class="line"><code class="docutils literal"><span class="pre">RESERVATIONDEPTH[0]</span> <span class="pre">8</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">RESERVATIONQOSLIST[0]</span> <span class="pre">highprio</span> <span class="pre">interactive</span> <span class="pre">debug</span></code></div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">RESERVATIONDEPTH[1]</span> <span class="pre">2</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">RESERVATIONQOSLIST[1]</span> <span class="pre">batch</span></code></div>
<div class="line">&#8212;-</div>
</div>
<p>This example will cause that the top 8 jobs belonging to the aggregate
group of <code class="docutils literal"><span class="pre">highprio</span></code>, <code class="docutils literal"><span class="pre">interactive</span></code>, and <code class="docutils literal"><span class="pre">debug</span></code> QoS jobs will
receive priority reservations. Additionally, the top 2 <code class="docutils literal"><span class="pre">batch</span></code> QoS
jobs will also receive priority reservations. Use of this feature allows
sites to maintain high throughput for important jobs by guaranteeing the
a significant proportion of these jobs are making progress towards
starting through use of the priority reservation.</p>
<p>A final reservation policy is in place to handle a number of real-world
issues. Occasionally when a reservation becomes active and a job
attempts to start, various resource manager race conditions or corrupt
state situations will prevent the job from starting. By default, Maui
assumes the resource manager is corrupt, releases the reservation, and
attempts to re-create the reservation after a short timeout. However, in
the interval between the reservation release and the re-creation
timeout, other priority reservations may allocate the newly available
resources, reserving them before the original reservation gets an
opportunity to reallocate them. Thus, when the original job reservation
is re-established, its original resource may be unavailable and the
resulting new reservation may be delayed several hours from the earlier
start time. The parameter
<a class="reference external" href="a.fparameters.html#reservationretrytime">RESERVATIONRETYTIME</a> allows
a site that is experiencing frequent resource manager race conditions
and/or corruption situations to tell Maui to hold on to the reserved
resource for a period of time in an attempt to allow the resource
manager to correct its state.</p>
<p>See also: <a class="reference external" href="7.1.1resoverview.html">Reservation Overview</a>,
<a class="reference external" href="8.2backfill.html">Backfill</a></p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="7.1.3standingreservations.html"
                        title="previous chapter">7.1.3. Standing Reservations</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="7.1.5managingreservations.html"
                        title="next chapter">7.1.5. Configuring and Managing Reservations</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/7.1.4reservationpolicies.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="7.1.5managingreservations.html" title="7.1.5. Configuring and Managing Reservations"
             >next</a> |</li>
        <li class="right" >
          <a href="7.1.3standingreservations.html" title="7.1.3. Standing Reservations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Maui Scheduler™ Administrator&#39;s Guide 3.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="7.0controllingresourceaccess.html" >7. 7.0 Controlling Resource Access - Reservations, Partitions, and QoS Facilities</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="7.1advancereservations.html" >7.1. Advance Reservations</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 1999-2014, Adaptive Computing Enterprises, Inc; 2016, Temple HPC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
  </body>
</html>